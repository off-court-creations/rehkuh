[
  {
    "name": "bicyclePlane",
    "type": "plane",
    "position": [
      0,
      1,
      0
    ],
    "rotation": [
      0,
      0,
      0
    ],
    "scale": [
      3,
      3,
      1
    ],
    "material": {
      "type": "shader",
      "shaderName": "bicycle",
      "uniforms": {
        "bikeColor": {
          "type": "color",
          "value": "#cc2222"
        },
        "bgColor": {
          "type": "color",
          "value": "#f5f5f5"
        }
      },
      "side": "double",
      "vertex": "// Bicycle shader - vertex\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",
      "fragment": "// Bicycle shader - fragment\n// Draws a red bicycle silhouette using signed distance functions\n\nuniform vec3 bikeColor;\nuniform vec3 bgColor;\n\nvarying vec2 vUv;\n\n// SDF for a circle\nfloat sdCircle(vec2 p, vec2 center, float radius) {\n  return length(p - center) - radius;\n}\n\n// SDF for a line segment\nfloat sdSegment(vec2 p, vec2 a, vec2 b, float thickness) {\n  vec2 pa = p - a;\n  vec2 ba = b - a;\n  float h = clamp(dot(pa, ba) / dot(ba, ba), 0.0, 1.0);\n  return length(pa - ba * h) - thickness;\n}\n\n// SDF for a ring (wheel)\nfloat sdRing(vec2 p, vec2 center, float radius, float thickness) {\n  return abs(length(p - center) - radius) - thickness;\n}\n\nvoid main() {\n  // Center and scale UV coordinates\n  vec2 uv = vUv * 2.0 - 1.0;\n  uv.x *= 1.5; // Stretch horizontally for bike proportions\n\n  // Wheel parameters\n  float wheelRadius = 0.35;\n  float wheelThickness = 0.025;\n  float spokeThickness = 0.012;\n  float frameThickness = 0.025;\n\n  // Wheel positions\n  vec2 backWheel = vec2(-0.5, -0.2);\n  vec2 frontWheel = vec2(0.5, -0.2);\n\n  // Frame key points\n  vec2 seatPost = vec2(-0.15, 0.3);\n  vec2 bottomBracket = vec2(0.0, -0.15);\n  vec2 headTube = vec2(0.35, 0.25);\n  vec2 handlebar = vec2(0.45, 0.45);\n  vec2 seat = vec2(-0.25, 0.4);\n\n  float d = 1000.0;\n\n  // Back wheel rim\n  d = min(d, sdRing(uv, backWheel, wheelRadius, wheelThickness));\n\n  // Front wheel rim\n  d = min(d, sdRing(uv, frontWheel, wheelRadius, wheelThickness));\n\n  // Back wheel hub\n  d = min(d, sdCircle(uv, backWheel, 0.03));\n\n  // Front wheel hub\n  d = min(d, sdCircle(uv, frontWheel, 0.03));\n\n  // Back wheel spokes (4 spokes)\n  for (int i = 0; i < 4; i++) {\n    float angle = float(i) * 3.14159 / 2.0;\n    vec2 spokeEnd = backWheel + vec2(cos(angle), sin(angle)) * (wheelRadius - 0.01);\n    d = min(d, sdSegment(uv, backWheel, spokeEnd, spokeThickness));\n  }\n\n  // Front wheel spokes (4 spokes)\n  for (int i = 0; i < 4; i++) {\n    float angle = float(i) * 3.14159 / 2.0 + 0.4;\n    vec2 spokeEnd = frontWheel + vec2(cos(angle), sin(angle)) * (wheelRadius - 0.01);\n    d = min(d, sdSegment(uv, frontWheel, spokeEnd, spokeThickness));\n  }\n\n  // Frame - seat tube (seat post to bottom bracket)\n  d = min(d, sdSegment(uv, seatPost, bottomBracket, frameThickness));\n\n  // Frame - down tube (head tube to bottom bracket)\n  d = min(d, sdSegment(uv, headTube, bottomBracket, frameThickness));\n\n  // Frame - top tube (seat post to head tube)\n  d = min(d, sdSegment(uv, seatPost, headTube, frameThickness));\n\n  // Frame - chain stay (back wheel to bottom bracket)\n  d = min(d, sdSegment(uv, backWheel, bottomBracket, frameThickness * 0.7));\n\n  // Frame - seat stay (back wheel to seat post)\n  d = min(d, sdSegment(uv, backWheel, seatPost, frameThickness * 0.6));\n\n  // Fork (front wheel to head tube)\n  d = min(d, sdSegment(uv, frontWheel, headTube, frameThickness * 0.7));\n\n  // Handlebar stem\n  d = min(d, sdSegment(uv, headTube, handlebar, frameThickness * 0.6));\n\n  // Handlebar\n  d = min(d, sdSegment(uv, handlebar + vec2(-0.1, 0.0), handlebar + vec2(0.08, -0.05), frameThickness * 0.5));\n\n  // Seat\n  d = min(d, sdSegment(uv, seat + vec2(-0.08, 0.0), seat + vec2(0.12, 0.0), frameThickness * 1.2));\n  d = min(d, sdSegment(uv, seatPost, seat, frameThickness * 0.5));\n\n  // Pedal crank\n  d = min(d, sdCircle(uv, bottomBracket, 0.04));\n  d = min(d, sdSegment(uv, bottomBracket, bottomBracket + vec2(0.08, -0.06), frameThickness * 0.4));\n  d = min(d, sdSegment(uv, bottomBracket, bottomBracket + vec2(-0.08, 0.06), frameThickness * 0.4));\n\n  // Smooth edge\n  float edge = smoothstep(0.01, -0.01, d);\n\n  // Mix colors\n  vec3 color = mix(bgColor, bikeColor, edge);\n\n  gl_FragColor = vec4(color, 1.0);\n}\n"
    }
  }
]